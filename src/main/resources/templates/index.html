<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thi Tot</title>
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/main.css">

</head>

<body>
  <header>
    <a href="/home" class="logo">
      <h1>Thi<span>Tot</span></h1>
    </a>
    <nav class="menu">
      <ul>
        <li><a href="/profile">Thông tin cá nhân</a></li>
        <li><a href="/exam">Đề thi</a></li>
        <li><a href="/subject">Luyện tập</a></li>
        <li><a href="/history">Lịch sử thi</a></li>
        <li th:if="${user != null}"><a href="/logout">Đăng xuất</a></li>
        <li th:unless="${user != null}"><a href="/login">Đăng nhập</a></li>
      </ul>
    </nav>
  </header>

  <div class="body">
    <div class="title" style="text-align:center; margin-top:40px;">
      <h1>Bạn muốn cải thiện điểm</h1>
      <h4>Hãy click vào nút dưới đây để tham gia thi ngay nào!!!</h4>
      <a th:if="${user != null}" href="/subject" class="btn" style="display:inline-block; margin-top:10px;">Luyện tập ngay</a>
      <a th:unless="${user != null}" href="/login" class="btn" style="display:inline-block; margin-top:10px;">Luyện tập ngay</a>

    </div>

    <div class="slider">
      <div class="slide-track">
        <div class="slide"><img src="/image/Banner.png" alt="1"></div>
        <div class="slide"><img src="/image/Toan.jpg" alt="2"></div>
        <div class="slide"><img src="/image/Vatly.png" alt="3"></div>
        <div class="slide"><img src="/image/Hoa.jpg" alt="4"></div>
      </div>
    </div>
    <div class="dots" id="dots-banner"></div>

    <!-- ========== SLIDER MÔN HỌC 2D ========== -->
    <div class="list">
      <div class="title"><h1>Môn học</h1></div>
      <div class="subject-slider">
        <div class="subject-track" id="subject-track">
          <div class="subject"><img src="/image/toan.jpg" alt="Toán"><p class="Subject--name">Toán</p><p class="Subject--decription">Luyện tập tư duy logic, kỹ năng giải bài.</p></div>
          <div class="subject"><img src="/image/Vatly.png" alt="Vật lý"><p class="Subject--name">Vật lý</p><p class="Subject--decription">Hiểu các quy luật tự nhiên và ứng dụng.</p></div>
          <div class="subject"><img src="/image/Hoa.jpg" alt="Hóa học"><p class="Subject--name">Hóa học</p><p class="Subject--decription">Khám phá thế giới vật chất và phản ứng hóa học.</p></div>
          <div class="subject"><img src="/image/Sinh.jpg" alt="Sinh học"><p class="Subject--name">Sinh học</p><p class="Subject--decription">Hiểu cơ thể và thế giới sống quanh ta.</p></div>
          <div class="subject"><img src="/image/Anh.jpg" alt="Anh văn"><p class="Subject--name">Tiếng Anh</p><p class="Subject--decription">Cải thiện ngôn ngữ và kỹ năng giao tiếp.</p></div>
        </div>
      </div>
      <div class="dots" id="dots-subject"></div>
    </div>
  </div>

  <footer>© 2025 ThiTot - Nền tảng thi trắc nghiệm</footer>

  <script>
    /* ========== BANNER SLIDER ========== */
    const slides = document.querySelectorAll(".slide");
    const dotsBanner = document.getElementById("dots-banner");
    let indexBanner = 0;

    slides.forEach((_, i) => {
      const dot = document.createElement("span");
      dot.classList.add("dot");
      if (i === 0) dot.classList.add("active");
      dot.addEventListener("click", () => goToSlideBanner(i));
      dotsBanner.appendChild(dot);
    });
    const bannerDots = document.querySelectorAll("#dots-banner .dot");

    function updateBanner() {
      slides.forEach(s => s.className = "slide");
      slides[indexBanner].classList.add("center");
      slides[(indexBanner + 1) % slides.length].classList.add("right");
      slides[(indexBanner + slides.length - 1) % slides.length].classList.add("left");
      bannerDots.forEach(d => d.classList.remove("active"));
      bannerDots[indexBanner].classList.add("active");
    }

    function goToSlideBanner(i) { indexBanner = i; updateBanner(); }
    setInterval(() => { indexBanner = (indexBanner + 1) % slides.length; updateBanner(); }, 4000);
    updateBanner();

    /* ========== MÔN HỌC SLIDER 2D (INFINITE) ========== */
    const track = document.getElementById("subject-track");
    const subjects = document.querySelectorAll(".subject");
    const dotsSubject = document.getElementById("dots-subject");
    const total = subjects.length;
    let indexSubject = 0;

    // Clone nội dung để tạo hiệu ứng vòng lặp
    track.innerHTML += track.innerHTML;

    subjects.forEach((_, i) => {
      const dot = document.createElement("span");
      dot.classList.add("dot");
      if (i === 0) dot.classList.add("active");
      dotsSubject.appendChild(dot);
    });
    const subjectDots = document.querySelectorAll("#dots-subject .dot");

    function updateSubjectDots() {
      subjectDots.forEach(dot => dot.classList.remove("active"));
      subjectDots[indexSubject % total].classList.add("active");
    }

    function nextSubject() {
      indexSubject++;
      track.style.transition = "transform 0.8s ease-in-out";
      track.style.transform = `translateX(-${indexSubject * 290}px)`;

      if (indexSubject >= total) {
        setTimeout(() => {
          track.style.transition = "none";
          track.style.transform = "translateX(0)";
          indexSubject = 0;
          updateSubjectDots();
        }, 800);
      }
      updateSubjectDots();
    }

    setInterval(nextSubject, 3000);
  </script>
</body>
</html>
